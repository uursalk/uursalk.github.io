<!DOCTYPE html>
<html>
<head>
  <title>Good Morning Test</title>
  <!-- OneSignal v16 SDK -->
  <script src="https://cdn.onesignal.com/sdks/web/v16/OneSignalSDK.page.js" defer></script>
  <script>
    window.OneSignalDeferred = window.OneSignalDeferred || [];
    OneSignalDeferred.push(async function(OneSignal) {
      await OneSignal.init({
        appId: "e2ec555f-e24b-49e4-9e28-288e0dc1b3bd",
        allowLocalhostAsSecureOrigin: true, // localhost test iÃ§in
      });
    });
  </script>
</head>
<body>
  <h2>ðŸ“± Good Morning Messages Test</h2>
  <p>GÃ¼naydÄ±n mesajlarÄ± iÃ§in test sayfasÄ±</p>
  
  <button id="subscribe-btn">ðŸ”” Bildirimlere Abone Ol</button>
  <div id="status"></div>

  <script>
    // Abone olma butonu
    document.getElementById('subscribe-btn').addEventListener('click', async () => {
      const OneSignal = await window.OneSignalDeferred?.[0]?.(OneSignal);
      await OneSignal.Slidedown.promptPush();

      const userId = await OneSignal.User.PushSubscription.getId();
      if (userId) {
        document.getElementById('status').innerHTML = 'âœ… BaÅŸarÄ±lÄ±! User ID: ' + userId;
        document.getElementById('subscribe-btn').style.display = 'none';
      }
    });

    // Sayfa aÃ§Ä±ldÄ±ÄŸÄ±nda kontrol et
    window.OneSignalDeferred.push(async function(OneSignal) {
      const userId = await OneSignal.User.PushSubscription.getId();
      if (userId) {
        document.getElementById('status').innerHTML = 'ðŸŽ‰ Zaten abone! User ID: ' + userId;
        document.getElementById('subscribe-btn').style.display = 'none';
      }
    });
  </script>
</body>
</html>
